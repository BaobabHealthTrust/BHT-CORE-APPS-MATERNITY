
<script type="text/javascript" src="/assets/js/jquery.min.js"></script>

<script type="text/javascript" src="/assets/js/post_parameters.js"></script>
<script type="text/javascript" src="/assets/js/generic_ajaxrequest.js"></script>
<script type="text/javascript" src="/apps/ART/assets/js/arv_number.js"></script>
<script type="text/javascript" src="/assets/js/moment.js"></script>
<script type="text/javascript" src="/assets/js/alertifyjs/alertify.js"></script>
<script type="text/javascript" src="/assets/js/does_connection_exist.js"></script>
<script type="text/javascript" src="/apps/MATERNITY/assets/js/birth_report.js"></script>
<script type="text/javascript" src="/public/touchscreentoolkit/lib/javascripts/touchScreenToolkit.js" defer="true"></script>

<link rel="stylesheet" href="/apps/MATERNITY/assets/css/birth_report.css" type="text/css">
<link rel="stylesheet" href="/assets/css/alertifyjs/css/alertify.css" type="text/css">
<style>
    .cell {
        border-bottom: dotted 1px #000
    }
    table {
        -moz-user-select: none;
    }
    .inputFrameClass{
        background-color: #fff;
    }
</style>
<body id="mateme">
<div id="container">
    <div id="content">
        <form>
            <input type="text" name="summary" id="birth_report"
                   tt_onLoad="__$('keyboard').style.display = 'none';changeClearButton(); changeNextButton(); fetchMotherDemographics();"
                   tt_pageStyleClass= "NoControls" helpText="" class="white" optional="true"/>
        </form>
    </div>
</div>
</body>

<script>
    var patientID = sessionStorage.getItem("patientID");
    var tstCurrentDate = moment(tstCurrentDate).format("YYYY-MM-DD");
    var tt_cancel_destination = "/views/patient_dashboard.html?patient_id=" + patientID;

    function changeClearButton() {
        var sendToEBRS = $('clearButton');
        sendToEBRS.innerHTML = '<span>Send to eBRS</span>';
        sendToEBRS.setAttribute('onmousedown','sendToEBRS();');
    }

    function changeNextButton(){
        var nextButton =  document.getElementById('nextButton');
        nextButton.setAttribute("onmousedown","finish();")
    }

    function finish(){
        window.location.href = "/views/patient_dashboard.html?patient_id=" + patientID;
    }

    function fetchMomDemographics() {
        var url = apiProtocol + "://" + apiURL + ":" + apiPort + "/api/v1/patients/" + sessionStorage.patientID;

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && (this.status == 201 || this.status == 200)) {
                var demographics = JSON.parse(this.responseText);
                var names = demographics.person.names[0];
                var addresses = demographics.person.addresses[0];
                console.log(demographics);
                return demographics;
            }
        };
        xhttp.open("GET", url, true);
        xhttp.setRequestHeader('Authorization', sessionStorage.getItem("authorization"));
        xhttp.setRequestHeader('Content-type', "application/json");
        xhttp.send();
    }

</script>
