
<script type="text/javascript" src="/public/touchscreentoolkit/lib/javascripts/touchScreenToolkit.js" defer="true"></script>
<script type="text/javascript" src="/assets/js/post_parameters.js"></script>
<script type="text/javascript" src="/assets/js/generic_ajaxrequest.js"></script>
<script type="text/javascript" src="/apps/ART/assets/js/arv_number.js"></script>
<script type="text/javascript" src="/assets/js/moment.js"></script>
<script type="text/javascript" src="/assets/js/alertifyjs/alertify.js"></script>
<script type="text/javascript" src="/assets/js/does_connection_exist.js"></script>
<link rel="stylesheet" href="/assets/css/alertifyjs/css/alertify.css" type="text/css">
<script type="text/javascript" src="/assets/js/jquery.min.js"></script>
<script>
var guardianAvailable = false;
var apiProtocol = sessionStorage.apiProtocol;
var apiURL = sessionStorage.apiURL;
var apiPort = sessionStorage.apiPort;
var patientID = sessionStorage.patientID;
function postVitalsObs(encounter) {

var obs = {
  encounter_id: encounter["encounter_id"],
}; 

submitParameters(obs,"nextPage")  
}
function nextPage(obs){
    nextEncounter(sessionStorage.patientID, 1);
}
function changeNextBTN() {
  console.log("Change button");
    var nextButton =  document.getElementById('nextButton');
    nextButton.setAttribute("onmousedown","submitHIVreception() ;")
}

function submitHIVreception() {
  console.log("Work ");
  var currentTime = moment().format(' HH:mm:ss');
  var encounter_datetime = moment(sessionStorage.sessionDate).format('YYYY-MM-DD'); 
  encounter_datetime += currentTime;
                        	
  var encounter = {
    encounter_type_name: 'SOCIAL HISTORY',
    encounter_type_id:  84,
    patient_id: patientID,
    encounter_datetime: encounter_datetime
  }

  submitParameters(encounter, "/encounters", "postVitalsObs");
}
</script>
<style>

.inputFrameClass {
  width: 96% !important;
}

#clearButton {
  display: none;
}

</style>

<body id="mateme">
  <div id="container">
    <div id="content">


      <form>

        <select id="education" name="education" tt_onLoad="" helpText="Eductaion Level">   
            <option>Primary</option>
            <option>Secondary</option>
            <option>Tertiary</option>
            <option>None</option>
            <option>Other</option>
        </select>
          
         <input type="text" name="religion" 
          id="religion" field_type="alpha" 
          helpText="Religion" 
          ajaxURL="/search/?search_string=" 
          allowFreeText="true" 
          tt_pageStyleClass="text"
         /> 


        <input type="text" name="other_religion" id="other_religion" field_type="alpha"  tt_onLoad='otherReligion();' helpText="Specify other religion" key="family_name" allowFreeText="true" condition ="__$('religion').value == 'Other'" />

         <input type="text" name="kin_first" 
         tt_onLoad="myInput()"
          id="kin_first" field_type="alpha" 
          key="kin_first" helpText="Next of kin first name"  
          ajaxURL="/search/kin_first?search_string=" 
          key=kin_first" allowFreeText="true" 
          condition="$(&quot;kin_first&quot;).value == &quot;&quot;" /> 

          <input type="text" name="kin_last" 
          id="kin_last" field_type="alpha" 
          helpText="Next of kin Last name" 
          ajaxURL="/search/?search_string=" 
          allowFreeText="true" 
          condition="$(&quot;kin_last&quot;).value == &quot;&quot;" /> 

          <input type="text" name="kin_number" id="kin_number" 
          helpText="Next of kin phone number" field_type="number" tt_pageStyleClass="NumbersWithUnknownAndDecimal" />

        <select id="relative" name="relative" tt_onLoad="changeNextBTN();changeNextButton();" helpText="Next of kin relationship"> 
          <option>Mother</option>
          <option>Daughter</option>
          <option>Sister</option>
          <option>Friend</option>
          <option>Aunt</option>
          <option>Unknown</option>
           <option>Other</option>
         </select>

      </form>

   </div>
 </div>
</body>

